import{d as f,r as m,a as k,u as h,b as w,c as S,e as C,o as x,w as D,f as a,g as n,h as P,i as t,j as p,F as g,k as u,t as L,l as b,m as r,_ as T}from"./index-BpTL8-df.js";import{M as z}from"./index-BtBZGl9D.js";const q=f("toplist",{state:()=>({detailList:[],topList:[],playlist:[],songs:[],isLoading:!1}),actions:{async getPersonalized(){let i=await S();i.code==200&&(this.detailList=i.result)},async getTopList(){let i=await w();i.code==200&&(this.topList=i.list)},async getSongDetail(i){this.isLoading=!0;let e=await k(i);e.code==200&&(this.songs=e.songs,h().topListPlayList(this.songs),console.log(this.songs),this.isLoading=!1)},async getPlaylistDetail(i){let e=await m(i);e.code==200&&(this.playlist=e.playlist);let o=e.playlist.trackIds.map(c=>c.id).join(",");this.getSongDetail(o)}},getters:{}}),B={key:0,"element-loading-text":"Loading...","element-loading-background":"rgba(0, 0, 0, 0.7)",class:"top-list",style:{"overflow-y":"auto"}},M={class:"personalized"},I=["onClick"],N=["src"],V={class:"top-list-info"},$=["title"],j=["onClick"],F=["src"],H={class:"top-list-info"},U=["title"],E={key:1},A=C({__name:"index",setup(i){const e=h(),o=q();x(()=>{o.getTopList(),o.getPersonalized()});const c=async d=>{o.getPlaylistDetail(d),console.log(e.topListSongs.length)};return(d,l)=>{const _=P("loading");return n(e).topListSongs.length?(r(),a("div",E,[t("span",{class:"return",onClick:l[0]||(l[0]=s=>n(e).topListSongs=[])},l[3]||(l[3]=[t("span",null,[t("svg",{t:"1740666111038",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2520",width:"23",height:"23"},[t("path",{d:"M918.8 411.9c-61.6-45.5-146.1-69.6-244.5-69.6H53.4L311.9 130c9.5-7.8 10.9-21.8 3.1-31.3-7.8-9.5-21.8-10.9-31.3-3.1L24 308.8l-1.6 1.5C8 324.7 0 344 0 364.6s8 39.9 22.4 54.3l0.8 0.8 260.4 213.9c4.1 3.4 9.1 5.1 14.1 5.1 6.4 0 12.8-2.8 17.2-8.1 7.8-9.5 6.4-23.5-3.1-31.3L53.4 386.9h620.9c147.5 0 305.2 63.9 305.2 243.3 0 178.7-153.3 258.8-305.2 258.8H328.8c-12.3 0-22.3 10-22.3 22.3s10 22.3 22.3 22.3h345.5c95.7 0 182.8-27.7 245.2-77.9 68.4-55 104.5-132.9 104.5-225.4 0-92-36.4-167.5-105.2-218.4z",fill:"#bfbfbf","p-id":"2521"})])],-1),t("span",null,"返回",-1)])),b(z,{musicList:n(e).topListSongs},null,8,["musicList"])])):D((r(),a("div",B,[t("div",M,[l[1]||(l[1]=t("h2",{class:"top-list-title"},"云音乐特色榜",-1)),n(o).topList.length?(r(!0),a(g,{key:0},u(n(o).topList.slice(0,4),(s,v)=>(r(),a("div",{class:"top-list-item",key:s.id,onClick:y=>c(s.id)},[t("img",{src:s.coverImgUrl,alt:"Top List Cover"},null,8,N),t("div",V,[t("span",{class:"top-list-name",title:s.name},L(s.name),9,$)])],8,I))),128)):p("",!0)]),t("div",null,[l[2]||(l[2]=t("h2",{class:"top-list-title"},"热门歌单",-1)),n(o).detailList.length?(r(!0),a(g,{key:0},u(n(o).detailList.slice(0,30),(s,v)=>(r(),a("div",{class:"top-list-item",key:s.id,onClick:y=>c(s.id)},[t("img",{src:s.picUrl,alt:"Top List Cover"},null,8,F),t("div",H,[t("span",{class:"top-list-name",title:s.name},L(s.name),9,U)])],8,j))),128)):p("",!0)])])),[[_,n(o).isLoading,void 0,{fullscreen:!0,lock:!0}]])}}}),K=T(A,[["__scopeId","data-v-aafc5e20"]]);export{K as default};
